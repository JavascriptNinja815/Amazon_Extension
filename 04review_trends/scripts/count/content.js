function findFirstCommonAncestor(e,n,o){var o=o||getAncestors(n);return 0==o.length?null:o.indexOf(e)>-1?e:e==document?null:findFirstCommonAncestor(e.parentNode,n,o)}function getAncestors(e){return e!=document?[e].concat(getAncestors(e.parentNode)):[e]}function process(e){"ok"==e&&document.addEventListener("mousedown",function(e){if(2==e.button){var n=window.getSelection().toString(),o="create_context_menu";chrome.extension.sendRequest({cmd:o,selection:n})}},!0)}chrome.runtime.onMessage.addListener(function(e){if("make_editable"==e.greeting){for(var n=window.getSelection(),o=n.anchorNode,t=n.focusNode,r=findFirstCommonAncestor(o,t);3==r.nodeType;)r=r.parentNode;console.dir(o),console.dir(t),console.dir(r),r.contentEditable="true",r.setAttribute("spellcheck", "false"),r.setAttribute("autocorrect", "false"),r.autocorrect=false,rspellcheck=false,r.spellCheck="true"}}),void 0===Array.prototype.indexOf&&(Array.prototype.indexOf=function(e){for(var n=0,o=this.length;o>n;n++)if(this[n]==e)return n;return-1}),chrome.storage.sync.get("license",function(e){var n=e.license,o="https://sushibytes.io/check.php?license="+n;$.ajax({type:"GET",url:o,beforeSend:function(){},success:function(e){process(e)},error:function(e){process(e)}})});